(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{205:function(e,t,a){var r=a(253);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a(38).default)("5426cd64",r,!0,{sourceMap:!1})},252:function(e,t,a){"use strict";var r=a(205);a.n(r).a},253:function(e,t,a){(t=a(37)(!1)).push([e.i,".battle-movie[data-v-dda0ba22]{width:100%;height:280px}.display-label[data-v-dda0ba22]{width:100%;margin:.5em 0}.margin-0-2[data-v-dda0ba22]{margin:.2em}",""]),e.exports=t},263:function(e,t,a){"use strict";a.r(t);a(213);var r=a(214),o=a.n(r),n=a(0),s=a(50),i=a(198),c=n.default.extend({data:function(){return{roomState:"entered",rappers:{me:{nickname:"Waiting...",peerId:"",feedback:{thumbUp:0,thumbDown:0}},competitor:{nickname:"Waiting...",peerId:"",feedback:{thumbUp:0,thumbDown:0}}},peer:void 0,chatCount:0,chats:[],chatMessage:""}},computed:{roomId:function(){return this.$route.query.roomId},roomName:function(){return this.$route.query.roomName},nickname:function(){return this.$route.query.nickname}},mounted:function(){var e=this;this.rappers.me.nickname=this.$route.query.nickname,this.rappers.me.peerId=this.$route.query.peerId,this.roomState="entered",this.$coreApi.get("/rooms/".concat(this.roomId)).then((function(t){var a=t.data.rappers.find((function(t){return t.peerId!==e.peerId}));e.rappers.competitor.peerId=a.peerId})),i.a.ref("/rooms/".concat(this.roomId,"/rappers/").concat(this.rappers.me.peerId,"/feedback")).on("value",(function(t){t&&t.val()&&(e.rappers.me.feedback=t.val())})),this.peer=new o.a(this.rappers.me.peerId,{key:s.a.skywayApiKey,debug:3})},methods:{onStart:function(){var e=this;this.roomState="connecting",navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){return document.getElementById("battle-movie-me").srcObject=t,e.roomState="waiting",t})).then((function(t){e.peer.joinRoom(e.roomId,{mode:"sfu",stream:t}).on("stream",(function(t){e.$coreApi.get("/rooms/".concat(e.roomId)).then((function(a){var r=a.data.rappers.find((function(t){return t.peerId!==e.rappers.me.peerId}));r.peerId===t.peerId&&(e.rappers.competitor.nickname=r.nickname,e.rappers.competitor.peerId=r.peerId,i.a.ref("/rooms/".concat(e.roomId,"/rappers/").concat(e.rappers.competitor.peerId,"/feedback")).on("value",(function(t){t&&t.val()&&(e.rappers.competitor.feedback=t.val())})),e.roomState="fighting")})),document.getElementById("battle-movie-competitor").srcObject=t}))}))},sendMessage:function(){i.a.ref("/rooms/".concat(this.$route.query.roomId,"/messages")).push({name:this.rappers.me.nickname,content:this.chatMessage}),this.chatMessage=""}}}),p=(a(252),a(25)),l=Object(p.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},["entered"===e.roomState?a("v-btn",{staticClass:"display-label",attrs:{dark:"",color:"black"},on:{click:e.onStart}},[e._v("START")]):e._e(),e._v(" "),"connecting"===e.roomState?a("v-btn",{staticClass:"display-label",attrs:{dark:"",color:"black",disabled:""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):e._e(),e._v(" "),"waiting"===e.roomState?a("v-btn",{staticClass:"display-label",attrs:{dark:"",color:"black",disabled:""}},[e._v("対戦相手が入場するまでお待ち下さい。")]):e._e(),e._v(" "),"fighting"===e.roomState?a("v-btn",{staticClass:"display-label",attrs:{dark:"",color:"black",disabled:""}},[e._v("FIGHT")]):e._e()],1)],1),e._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{staticClass:"margin-0-2",attrs:{xs6:"","text-xs-center":""}},[a("v-card",{staticClass:"transparent-panel"},[a("video",{staticClass:"battle-movie",attrs:{id:"battle-movie-me",autoplay:"",playsinline:""}}),e._v(" "),a("v-card-title",[a("div",[e._v(e._s(e.rappers.me.nickname))])]),e._v(" "),a("v-card-actions",[a("v-chip",{attrs:{color:"white",label:"",outline:""}},[a("v-avatar",[a("v-icon",{staticClass:"neon"},[e._v("thumb_up")])],1),e._v(" "),a("span",{staticClass:"neon"},[e._v(e._s(e.rappers.me.feedback.thumbUp))])],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-chip",{attrs:{color:"white",label:"",outline:""}},[a("span",{staticClass:"neon-blue"},[e._v(e._s(e.rappers.me.feedback.thumbDown))]),e._v(" "),a("v-avatar",[a("v-icon",{staticClass:"neon-blue thumbDown"},[e._v("thumb_down")])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{staticClass:"margin-0-2",attrs:{xs6:"","text-xs-center":""}},[a("v-card",{staticClass:"transparent-panel"},[a("video",{staticClass:"battle-movie",attrs:{id:"battle-movie-competitor",autoplay:"",playsinline:""}}),e._v(" "),a("v-card-title",[a("div",[e._v(e._s(e.rappers.competitor.nickname))])]),e._v(" "),a("v-card-actions",[a("v-chip",{attrs:{color:"white",label:"",outline:""}},[a("v-avatar",[a("v-icon",{staticClass:"neon"},[e._v("thumb_up")])],1),e._v(" "),a("span",{staticClass:"neon"},[e._v(e._s(e.rappers.competitor.feedback.thumbUp))])],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-chip",{attrs:{color:"white",label:"",outline:""}},[a("span",{staticClass:"neon-blue"},[e._v(e._s(e.rappers.competitor.feedback.thumbDown))]),e._v(" "),a("v-avatar",[a("v-icon",{staticClass:"neon-blue thumbDown"},[e._v("thumb_down")])],1)],1)],1)],1)],1)],1),e._v(" "),a("chat",{attrs:{"room-id":e.roomId,"my-nickname":e.rappers.me.nickname}})],1)}),[],!1,null,"dda0ba22",null);t.default=l.exports;installComponents(l,{Chat:a(215).default})}}]);