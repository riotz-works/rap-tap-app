(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{261:function(e,t,r){"use strict";r.r(t);r(29),r(30),r(11),r(19);var n=r(2),a=r(0),o=r(199),u=a.default.extend({data:function(){return{isSubmitted:!1,valid:!0,nickname:"",nicknameRules:[function(e){return Boolean(e)||"ニックネームを入力してください"},function(e){return e.length<=20||"ニックネームは20文字以内で入力してください。"}],modes:{rapper:"対戦",watcher:"観戦"}}},methods:{getMode:function(){var e=this.$route.query.mode;return this.modes[e]||"対戦"},submit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,a,u,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isSubmitted||!e.$refs.form.validate()){t.next=19;break}if(e.isSubmitted=!0,r=e.$route.query.mode,n=e.$route.query.roomId,a=e.$route.query.roomName,u=e.nickname,i="".concat(n,"-").concat(Math.random().toString(36).slice(-4)),"rapper"!==r){t.next=17;break}return t.next=10,e.$coreApi.post("/rooms/".concat(n),{nickname:u,peerId:i});case 10:if(200===t.sent.status){t.next=15;break}return e.isSubmitted=!1,t.abrupt("return");case 15:return t.next=17,o.a.ref("/rooms/".concat(n,"/rappers/").concat(i)).set({feedback:{thumbUp:0,thumbDown:0}});case 17:"rapper"===r&&e.$router.push({path:"/room/rapper",query:{roomId:n,roomName:a,peerId:i,nickname:u}}),"watcher"===r&&e.$router.push({path:"/room/watcher",query:{roomId:n,roomName:a,peerId:i,nickname:u}});case 19:case"end":return t.stop()}}),t)})))()}}}),i=r(26),c=Object(i.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"bottom"},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"","text-xs-center":""}},[r("p",[e._v(e._s(e.getMode())+"ルームに入場します。")])])],1),e._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"","text-xs-center":""}},[r("v-form",{ref:"form",attrs:{color:"black","lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{label:"ニックネーム","prepend-icon":"tag_faces",required:"",counter:20,rules:e.nicknameRules},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),e._v(" "),r("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("\n          入場する\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);